<!-- JS Dependencies -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" crossorigin="anonymous"
  defer></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" crossorigin="anonymous"
  defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/ScrollMagic.min.js" defer></script>


<script defer>
  $(document).ready(function(){
    var controller = new ScrollMagic.Controller();

    $('[data-lazy-type]').each(function () {
      var currentElement = this;
      var $this = $(this);
      var type = $this.data('lazy-type');
      var lazySrc = $this.data('lazy-src');
      var scene = new ScrollMagic.Scene({
        triggerElement: currentElement,
        reverse: false,
        offset: -500
      })
        .on('enter', function () {
          if (type == 'image') {
            $this.attr('src', lazySrc);
          }
          if (type == 'bg-image') {
            $this.css('background-image', 'url(' + lazySrc + ')')
          }
          if (type == 'video') {
            $this.attr('src', lazySrc);
          }
          if (type == 'bg-video') {
            lazyLoadBgVideo($this);
          }
        })
        .on('exit', function () {
          if (type == 'bg-video') {
            // test to confirm this is working
            currentElement.pause();
          }
        })
        .setClassToggle(currentElement, "active")
        .addTo(controller);
    })
  })
</script>